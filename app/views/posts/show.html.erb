<h1><%= @post.title %></h1>
<p>By <%= @post.user.full_name %> on <%= @post.created_at.strftime("%b. %e, %Y") %>
  <br>Category: <%= @post.category.name %></p>
<p><%= @post.body %></p>
<% if can? :modify, @post %>
  <%= link_to 'edit', edit_post_path(@post)%>
  <%= link_to 'delete', post_path(@post),
                          method: :delete,
                          data: {confirm: 'Are you sure?'}%>
<% end %>
<% if (user_signed_in?) && (can? :favorite, @post) %>
  <% if @favorite.present? %>
    <%= link_to 'unfavorite', post_favorite_path(@post, @favorite), method: :delete %>
  <% else %>
    <%= link_to 'favorite', post_favorites_path(@post), method: :post%>
  <% end %>
<% end %>

<hr>
<h2>Write a Comment</h2>
<div class="error"><%= @comment.errors.full_messages.join(', ') %></div>
<%= form_for [@post, @comment] do |f| %>
  <div>
    <%= f.text_area :body %>
  </div>
  <%= f.submit 'Post Comment'%>
<% end %>

<h2>Comments</h2>
<% @post.comments.each do |com| %>
  <div>
    by <%= com.user.first_name %> <%= com.user.last_name %> on <%= com.created_at.strftime("%b. %e, %Y") %>
    <p class="comment_info"><%= com.body %>
    </p>
    <% if can? :modify, com%>
      <%= link_to 'edit', edit_post_comment_path(@post, com)%>
      <%= link_to 'delete', post_comment_path(@post, com),
                            method: :delete,
                            data: {confirm: 'Are you sure?'}%>
    <% end %>
  </div>
  <hr>
  <% end %>
