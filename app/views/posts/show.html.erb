<h1><%= @post.title %></h1>
<p>By <%= @post.user.first_name %> <%= @post.user.last_name %>
  <br>Posted: <%= @post.created_at %>
  <br>Category: <%= @post.category.name %></p>
<p><%= @post.body %></h1>
<br>
<% if can? :manage, @post %>
  <%= link_to 'edit', edit_post_path(@post)%>
  <%= link_to 'delete', post_path(@post),
                          method: :delete,
                          data: {confirm: 'Are you sure?'}%>
<% end %>
<hr>
<h2>Write a Comment</h2>
<div class="error"><%= @comment.errors.full_messages.join(', ') %></div>
<%= form_for [@post, @comment] do |f| %>
  <div>
    <%= f.label :body %>
    <%= f.text_area :body %>
  </div>
  <%= f.submit 'Post Comment'%>
<% end %>

<h2>Comments</h2>
<% @post.comments.each do |com| %>
  <div>
    <%= com.user.first_name %> <%= com.user.last_name %> :<%= com.created_at %>
    <p class="comment_info"><%= com.body %>
    </p>
    <% if can? [:edit, :destroy], com%>
      <%= link_to 'edit', edit_post_comment_path(@post, com)%>
      <%= link_to 'delete', post_comment_path(@post, com),
                            method: :delete,
                            data: {confirm: 'Are you sure?'}%>
    <% end %>
  </div>
  <hr>
  <% end %>
